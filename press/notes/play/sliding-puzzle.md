---
date: 2023/6/27
title: 滑动拼图
category: 练习
tags:
  - 小游戏
  - 算法
---

前段时间在便利店等待结账时，看到有小孩在玩一个拼图相关的玩具，通过利用地图上的一个空位来不断挪动其它拼图的位置，最终复原出被打乱的拼图。

想起自己小时候也玩过类似的玩具，不过那时候正常拼怎么都拼不出来，后来用的暴力法，直接把拼图全拆出来，再按顺序装回去。

现在我尝试动手做了一版，终于是能够正常拼出来了 😎。

## 试玩

<DemoWrapper></DemoWrapper>

## 日志

### 关于开局乱序

最开始我是直接用随机的方法打乱滑块位置，但是试玩几次后，我感觉有时候压根解不出来， 例如我把地图规格调整成了 `2 * 2`，然后构造出了如下开局，多次尝试后有感。

也就是说，要使这个游戏能正常进行下去，我们需要确保给玩家的开局一定是有解的。

一种简单的思路是考虑到每次滑动都是可逆的（滑过去后再滑回来，棋盘局面并不会变），于是可以采用从终点开始“倒着滑”的方式，每次从上下左右四个方向中随机一个方向滑动，这样重复一定次数后，得到的棋盘肯定是有解的。其中，次数应该与滑块总数量正相关，我这里取的是棋盘 `长 * 宽 * 20`。

另一种思路就比较复杂，但更有挑战性，如果我们能找出棋盘局面与其是否有解之间的关系，是不是就可以任意构造出一种有解的棋盘呢？搜索后还真有答案，但是论证过程很复杂，我没有整明白，这里就不再叙述 😞。

### 实现自动求解

## 后记

突然知道小时候拼不出的一大原因了，因为相对于移动数字来说，移动图片要更难些（至少对我来说） 😭。
在移动数字时，我可以很轻松地获取到如下信息：

- 某个数字块最终应该移动到哪个格子
- 两个数字块最终的相对位置：谁在上，谁在下，谁在左，谁在右

而换成图片，我就不能直观的获取到这些信息（脑海中得先将图片转为数字，不过话说有对图片更敏感的人吗？），难度自然增加了不少。

## 附录

- [15 puzzle | wikipedia](https://en.wikipedia.org/wiki/15_Puzzle)
- [773. 滑动谜题 | 力扣](https://leetcode.cn/problems/sliding-puzzle/)
- [implementing-a-star-to-solve-n-puzzle](https://algorithmsinsight.wordpress.com/graph-theory-2/a-star-in-general/implementing-a-star-to-solve-n-puzzle/)
